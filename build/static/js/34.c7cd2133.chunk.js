"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[34],{1034:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var s=n(1413),i=n(885),a=n(2791),r=n(6030),l=n(3259),c=n(6015),o=n(1091),d=n(4565),m=n(9885),u=n(1374),p=n(184),f=function(e){var t=e.name,n=e.label,f=e.helperText,x=e.value,g=e.defaultValue,h=e.onChange,y=e.disabled,Z=a.useRef(),j=a.useState((function(){return x&&"object"===typeof x&&x.src&&"string"===typeof x.src&&x.systemId&&"string"===typeof x.systemId?x:g&&"object"===typeof g&&g.src&&"string"===typeof g.src&&g.systemId&&"string"===typeof g.systemId?g:{src:"",systemId:"",id:"input-file-".concat(t)}})),S=(0,i.Z)(j,2),v=S[0],b=S[1],I=a.useState((function(){return!1})),k=(0,i.Z)(I,2),C=k[0],F=k[1],O=(0,r.v9)((0,l.Z)(["api","list","filesSystemSelect","data"],(function(e){return e.id===v.systemId}))),P=((O||{}).systemSystemOptions||[]).find((function(e){return"files-system-option-root"===e.systemOptionId})),z=(((O||[]).systemSystemSystemOptions||[]).find((function(e){return e.systemSystemOptionId===(P||{}).id}))||{}).content,w=a.useCallback((function(e){b((function(t){return(0,s.Z)((0,s.Z)({},t),{},{systemId:e.target.value,errorSystemId:"",src:""})}))}),[b]),H=a.useCallback((function(e){var t=new FileReader,n=e.target.files;t.readAsDataURL(e.target.files[0]),t.addEventListener("load",(function(e){b((function(t){var i=(0,s.Z)((0,s.Z)({},t),{},{src:e.target.result,path:z,fileName:n[0].name,size:n[0].size});return h({target:{value:i,currentValue:i,files:n}}),((Z.current||{}).style||{}).backgroundImage="url(".concat(e.target.result,")"),i})),F(!0)}))}),[h,b,Z,z]),W=v.src&&(function(){var e=v.src.split(".");return"png"===e[e.length-1]||"jpeg"===e[e.length-1]||"jpg"===e[e.length-1]||"svg"===e[e.length-1]||"gif"===e[e.length-1]}()||0===v.src.indexOf("data:image/png;base64")||0===v.src.indexOf("data:image/jpeg;base64")||0===v.src.indexOf("data:image/jpg;base64")||0===v.src.indexOf("data:image/svg;base64")||0===v.src.indexOf("data:image/png;base64"));return(0,p.jsx)(a.Fragment,{children:(0,p.jsxs)(c.Z,{children:[n?(0,p.jsx)(c.Z,{pb:f?1:2,children:(0,p.jsx)(d.Z,{component:"div",variant:"h6",children:n})}):(0,p.jsx)(a.Fragment,{}),(0,p.jsx)(c.Z,{py:2,maxWidth:"240px",children:(0,p.jsx)(u.Z,{disabled:y,name:"".concat(t,"-systemId"),label:"Select system",value:v.systemId||"",onChange:w,error:v.errorSystemId})}),v.systemId?(0,p.jsxs)(a.Fragment,{children:[(0,p.jsx)(c.Z,{pb:2,children:(0,p.jsxs)(o.Z,{disabled:y,disableElevation:!0,component:"label",variant:"contained",color:"primary",startIcon:(0,p.jsx)(m.Z,{}),children:["Select file",(0,p.jsx)("input",{id:"input-file-".concat(t),name:t,type:"file",onChange:H,style:{display:"none"}})]})}),(0,p.jsx)(c.Z,{ref:Z,maxWidth:"240px",sx:(0,s.Z)((0,s.Z)({},W?{backgroundImage:"url('".concat(C?v.src:"https://files.cidiator.com"+v.src,"?accessToken=").concat(localStorage.getItem("".concat("https://dev.cidiator.com","_accessToken")),"')"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{}),{},{"&:after":{content:'""',display:"block",paddingBottom:W?"240px":"0px"}}),children:v.fileName&&v.size?(0,p.jsxs)(a.Fragment,{children:[(0,p.jsx)(m.Z,{}),(0,p.jsx)(d.Z,{children:(0,p.jsx)("i",{children:(0,p.jsx)("b",{children:v.fileName})})}),(0,p.jsx)(d.Z,{variant:"caption",color:"textSecondary",children:(0,p.jsxs)("i",{children:["(",v.size," bytes)"]})})]}):(0,p.jsx)(a.Fragment,{})})]}):(0,p.jsx)(a.Fragment,{}),f?(0,p.jsx)(c.Z,{pb:2,children:(0,p.jsx)(d.Z,{component:"div",children:f})}):(0,p.jsx)(a.Fragment,{})]})})};(f=a.memo(f)).defaultProps={onChange:function(){}};var x=f},1374:function(e,t,n){n.d(t,{Z:function(){return b}});var s=n(1413),i=n(2982),a=n(5987),r=n(2791),l=n(6030),c=n(393),o=n(4307),d=n(2772),m=n(2606),u=n(708),p=n(5953),f=n(5702),x=n(4585),g=n(1251),h=n(7232),y=n(5812),Z=n(9776),j=n(184),S=["name","children"],v=function(e){var t,n,v,b=e.name,I=e.children,k=(0,a.Z)(e,S),C=(0,c.Ds)().enqueueSnackbar,F=(0,l.v9)((0,u.Z)(["api","form","filesManageSystem","loader"])),O=(0,l.v9)((0,u.Z)(["api","list","filesSystemSelect","loader"])),P=null!==(t=(0,l.v9)((0,u.Z)(["api","list","filesSystemSelect","total"])))&&void 0!==t?t:0,z=null!==(n=(0,l.v9)((0,u.Z)(["api","list","filesSystemSelect","page"])))&&void 0!==n?n:1,w=null!==(v=(0,l.v9)((0,u.Z)(["api","list","filesSystemSelect","limit"])))&&void 0!==v?v:20,H=(0,l.v9)((0,u.Z)(["api","list","filesSystemSelect","query"])),W=(0,l.v9)((0,u.Z)(["api","list","filesSystemSelect","data"])),A=r.useCallback((function(e,t){(0,d.P)("filesSystemSelect","loader",!0)(),(0,d.P)("filesSystemSelect","page",t)()}),[]),L=r.useCallback((function(e){(0,d.P)("filesSystemSelect","loader",!0)(),(0,d.P)("filesSystemSelect","limit",e.target.value)()}),[]),E=r.useCallback((function(e){}),[]);return r.useEffect((function(){(0,o.i)({id:"filesSystemSelect",url:"https://files.cidiator.com",path:"system",withAccessToken:!0,page:z,limit:w,query:H,relations:{systemSystemOptions:!0,systemSystemSystemOptions:!0}})(C)}),[C,z,w,H]),r.useEffect((function(){return function(){(0,m.K)("filesSystemSelect")()}}),[]),(0,j.jsxs)(r.Fragment,{children:[(0,j.jsx)(g.Z,{visible:O,wrapper:{p:0},sx:{minWidth:"24px",maxWidth:"24px",minHeight:"24px",maxHeight:"24px"}}),O||!I&&!Array.isArray(W)?(0,j.jsx)(r.Fragment,{}):(0,j.jsx)(r.Fragment,{children:(0,j.jsx)(h.Z,(0,s.Z)((0,s.Z)((0,s.Z)({name:b},k),F?{disabled:!0}:{}),{},{children:I||(Array.isArray(W)?[].concat((0,i.Z)(1===z&&P<w?[]:[(0,j.jsx)(Z.Z,{name:"select-".concat(b.toString(),"-search"),onSearch:E},"formSearch")]),(0,i.Z)(W.map((function(e){return(0,j.jsx)(f.Z,{value:e.id,children:e.name},e.id)}))),(0,i.Z)(1===z&&P<w?[]:[(0,j.jsxs)(p.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",sx:{padding:"14px 8px 0px 0px"},children:[(0,j.jsx)(p.ZP,{item:!0,xs:!0,children:(0,j.jsx)(x.Z,{count:Math.ceil(P/w),page:z,onChange:A})}),(0,j.jsx)(p.ZP,{item:!0,xs:!1,sx:{minWidth:"90px"},children:(0,j.jsx)(y.Z,{label:"Linit",size:"small",value:w,onChange:L})})]},"MuiPagination")])):(0,j.jsx)(f.Z,{children:(0,j.jsx)(g.Z,{visible:!0,wrapper:{p:0},sx:{minWidth:"24px",maxWidth:"24px",minHeight:"24px",maxHeight:"24px"}})}))}))})]})};(v=r.memo(v)).defaultProps={name:"systemId",multiple:!1,onChange:function(){}};var b=v},9885:function(e,t,n){var s=n(4836);t.Z=void 0;var i=s(n(5649)),a=n(184),r=(0,i.default)((0,a.jsx)("path",{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z"}),"InsertDriveFile");t.Z=r}}]);
//# sourceMappingURL=34.c7cd2133.chunk.js.map