"use strict";(self.webpackChunkmain=self.webpackChunkmain||[]).push([[34],{1034:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var s=n(1413),i=n(885),a=n(2791),r=n(6030),l=n(3259),c=n(6015),o=n(1091),d=n(4565),m=n(9885),u=n(1374),p=n(184),f=function(e){var t=e.name,n=e.label,f=e.helperText,g=e.value,x=e.defaultValue,y=e.onChange,h=e.disabled,Z=a.useRef(),S=a.useState((function(){return g&&"object"===typeof g&&g.src&&"string"===typeof g.src&&g.systemId&&"string"===typeof g.systemId?g:x&&"object"===typeof x&&x.src&&"string"===typeof x.src&&x.systemId&&"string"===typeof x.systemId?x:{src:"",systemId:"",id:"input-file-".concat(t)}})),v=(0,i.Z)(S,2),j=v[0],b=v[1],I=a.useState((function(){return!1})),k=(0,i.Z)(I,2),C=k[0],O=k[1],P=(0,r.v9)((0,l.Z)(["api","list","filesSystemSelect","data"],(function(e){return e.id===j.systemId}))),F=((P||{}).systemSystemOptions||[]).find((function(e){return"files-system-option-root"===e.systemOptionId})),w=(((P||[]).systemSystemSystemOptions||[]).find((function(e){return e.systemSystemOptionId===(F||{}).id}))||{}).content,H=a.useCallback((function(e){b((function(t){return(0,s.Z)((0,s.Z)({},t),{},{systemId:e.target.value,errorSystemId:"",src:""})}))}),[b]),W=a.useCallback((function(e){var t=new FileReader,n=e.target.files;t.readAsDataURL(e.target.files[0]),t.addEventListener("load",(function(e){b((function(t){var i=(0,s.Z)((0,s.Z)({},t),{},{src:e.target.result,path:w});return y({target:{value:i,currentValue:i,files:n}}),((Z.current||{}).style||{}).backgroundImage="url(".concat(e.target.result,")"),i})),O(!0)}))}),[y,b,Z,w]),A=j.src&&(function(){var e=j.src.split(".");return"png"===e[e.length-1]||"jpeg"===e[e.length-1]||"jpg"===e[e.length-1]||"svg"===e[e.length-1]||"gif"===e[e.length-1]}()||0===j.src.indexOf("data:image/png;base64")||0===j.src.indexOf("data:image/jpeg;base64")||0===j.src.indexOf("data:image/jpg;base64")||0===j.src.indexOf("data:image/svg;base64")||0===j.src.indexOf("data:image/png;base64"));return(0,p.jsx)(a.Fragment,{children:(0,p.jsxs)(c.Z,{children:[n?(0,p.jsx)(c.Z,{pb:f?1:2,children:(0,p.jsx)(d.Z,{component:"div",variant:"h6",children:n})}):(0,p.jsx)(a.Fragment,{}),(0,p.jsx)(c.Z,{py:2,maxWidth:"240px",children:(0,p.jsx)(u.Z,{disabled:h,name:"".concat(t,"-systemId"),label:"Select system",value:j.systemId||"",onChange:H,error:j.errorSystemId})}),j.systemId?(0,p.jsxs)(a.Fragment,{children:[(0,p.jsx)(c.Z,{pb:2,children:(0,p.jsxs)(o.Z,{disabled:h,disableElevation:!0,component:"label",variant:"contained",color:"primary",startIcon:(0,p.jsx)(m.Z,{}),children:["Select file",(0,p.jsx)("input",{id:"input-file-".concat(t),name:t,type:"file",onChange:W,style:{display:"none"}})]})}),(0,p.jsx)(c.Z,{ref:Z,maxWidth:"240px",sx:(0,s.Z)((0,s.Z)({},A?{backgroundImage:"url('".concat(C?j.src:"https://files.cidiator.com"+j.src,"?accessToken=").concat(localStorage.getItem("".concat("https://dev.cidiator.com","_accessToken")),"')"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{}),{},{"&:after":{content:'""',display:"block",paddingBottom:A?"240px":"0px"}})})]}):(0,p.jsx)(a.Fragment,{}),f?(0,p.jsx)(c.Z,{pb:2,children:(0,p.jsx)(d.Z,{component:"div",children:f})}):(0,p.jsx)(a.Fragment,{})]})})};(f=a.memo(f)).defaultProps={onChange:function(){}};var g=f},1374:function(e,t,n){n.d(t,{Z:function(){return b}});var s=n(1413),i=n(2982),a=n(5987),r=n(2791),l=n(6030),c=n(393),o=n(4307),d=n(2772),m=n(2606),u=n(708),p=n(5953),f=n(5702),g=n(4585),x=n(1251),y=n(7232),h=n(5812),Z=n(9776),S=n(184),v=["name","children"],j=function(e){var t,n,j,b=e.name,I=e.children,k=(0,a.Z)(e,v),C=(0,c.Ds)().enqueueSnackbar,O=(0,l.v9)((0,u.Z)(["api","form","filesManageSystem","loader"])),P=(0,l.v9)((0,u.Z)(["api","list","filesSystemSelect","loader"])),F=null!==(t=(0,l.v9)((0,u.Z)(["api","list","filesSystemSelect","total"])))&&void 0!==t?t:0,w=null!==(n=(0,l.v9)((0,u.Z)(["api","list","filesSystemSelect","page"])))&&void 0!==n?n:1,H=null!==(j=(0,l.v9)((0,u.Z)(["api","list","filesSystemSelect","limit"])))&&void 0!==j?j:20,W=(0,l.v9)((0,u.Z)(["api","list","filesSystemSelect","query"])),A=(0,l.v9)((0,u.Z)(["api","list","filesSystemSelect","data"])),L=r.useCallback((function(e,t){(0,d.P)("filesSystemSelect","loader",!0)(),(0,d.P)("filesSystemSelect","page",t)()}),[]),z=r.useCallback((function(e){(0,d.P)("filesSystemSelect","loader",!0)(),(0,d.P)("filesSystemSelect","limit",e.target.value)()}),[]),E=r.useCallback((function(e){}),[]);return r.useEffect((function(){(0,o.i)({id:"filesSystemSelect",url:"https://files.cidiator.com",path:"system",withAccessToken:!0,page:w,limit:H,query:W,relations:{systemSystemOptions:!0,systemSystemSystemOptions:!0}})(C)}),[C,w,H,W]),r.useEffect((function(){return function(){(0,m.K)("filesSystemSelect")()}}),[]),(0,S.jsxs)(r.Fragment,{children:[(0,S.jsx)(x.Z,{visible:P,wrapper:{p:0},sx:{minWidth:"24px",maxWidth:"24px",minHeight:"24px",maxHeight:"24px"}}),P||!I&&!Array.isArray(A)?(0,S.jsx)(r.Fragment,{}):(0,S.jsx)(r.Fragment,{children:(0,S.jsx)(y.Z,(0,s.Z)((0,s.Z)((0,s.Z)({name:b},k),O?{disabled:!0}:{}),{},{children:I||(Array.isArray(A)?[].concat((0,i.Z)(1===w&&F<H?[]:[(0,S.jsx)(Z.Z,{name:"select-".concat(b.toString(),"-search"),onSearch:E},"formSearch")]),(0,i.Z)(A.map((function(e){return(0,S.jsx)(f.Z,{value:e.id,children:e.name},e.id)}))),(0,i.Z)(1===w&&F<H?[]:[(0,S.jsxs)(p.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",sx:{padding:"14px 8px 0px 0px"},children:[(0,S.jsx)(p.ZP,{item:!0,xs:!0,children:(0,S.jsx)(g.Z,{count:Math.ceil(F/H),page:w,onChange:L})}),(0,S.jsx)(p.ZP,{item:!0,xs:!1,sx:{minWidth:"90px"},children:(0,S.jsx)(h.Z,{label:"Linit",size:"small",value:H,onChange:z})})]},"MuiPagination")])):(0,S.jsx)(f.Z,{children:(0,S.jsx)(x.Z,{visible:!0,wrapper:{p:0},sx:{minWidth:"24px",maxWidth:"24px",minHeight:"24px",maxHeight:"24px"}})}))}))})]})};(j=r.memo(j)).defaultProps={name:"systemId",multiple:!1,onChange:function(){}};var b=j},9885:function(e,t,n){var s=n(4836);t.Z=void 0;var i=s(n(5649)),a=n(184),r=(0,i.default)((0,a.jsx)("path",{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z"}),"InsertDriveFile");t.Z=r}}]);
//# sourceMappingURL=34.400c74aa.chunk.js.map